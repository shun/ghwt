# .aicoding/rules/010-github-feature-development-rules.yaml
# GitHubæ©Ÿèƒ½ã‚’ä¸­å¿ƒã¨ã—ãŸAIé§†å‹•é–‹ç™ºãƒ«ãƒ¼ãƒ«
# Version: 1.0 (2025-07-10)
# Description:
#   æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ã¯ GitHub ãŒæä¾›ã™ã‚‹ä¸»è¦æ©Ÿèƒ½ (Issueãƒ»Projectãƒ»Pull Requestãƒ»Actionãƒ»Security ç­‰) ã‚’
#   AI ãŒæœ€å¤§é™æ´»ç”¨ã—ãªãŒã‚‰é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã‚’è‡ªå‹•åŒ–ï¼åŠ¹ç‡åŒ–ã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’å®šç¾©ã™ã‚‹ã€‚
#   æ—¢å­˜ã® 001,002,007 ãªã©ã®è©³ç´°ãƒ«ãƒ¼ãƒ«ã‚’è£œå®Œã—ã€GitHub ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã§ä¸€è²«æ€§ã®ã‚ã‚‹
#   ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚
#
#============================================
# ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒ‰å®šç¾©
#--------------------------------------------
github_feature_rules:
  # ------------------------------------------------------------------
  # 1. Issues & Projects é€£æº
  # ------------------------------------------------------------------
  - id: "ISSUE_MANDATORY_AND_LINK_TO_PROJECT"
    area: "issues_projects"
    description: |
      æ–°ã—ã„æ©Ÿèƒ½é–‹ç™ºãƒ»ãƒã‚°ä¿®æ­£ãƒ»æ”¹å–„ä½œæ¥­ã¯å¿…ãš GitHub Issue ã¨ã—ã¦ç™»éŒ²ã—ã€
      GitHub Projects (ãƒœãƒ¼ãƒ‰) ã«ç´ä»˜ã‘ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚
      ã“ã‚Œã«ã‚ˆã‚Šãƒãƒƒã‚¯ãƒ­ã‚°ã¨é€²æ—ãŒä¸€å…ƒç®¡ç†ã•ã‚Œã€AI/äººé–“ãŒçŠ¶æ³ã‚’å®¹æ˜“ã«æŠŠæ¡ã§ãã‚‹ã€‚
    trigger_actions: ["issue_create_intent"]
    guidance_for_ai: |
      1. Issue ã‚’ç”Ÿæˆãƒ»ç™»éŒ²ã—ãŸç›´å¾Œã« `gh project item-add` ã§é©åˆ‡ãªã‚«ãƒ©ãƒ  (ä¾‹: _Todo_) ã«è¿½åŠ ã™ã‚‹ã€‚
      2. Projects ã¸ã®ãƒªãƒ³ã‚¯ãŒå¤±æ•—ã—ãŸå ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è§£æã—ãƒªãƒˆãƒ©ã‚¤ã€
         ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¸è¶³æƒ…å ± (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç•ªå·ãªã©) ã‚’è³ªå•ã™ã‚‹ã€‚
    severity: "CRITICAL"

  - id: "ISSUE_LABELING_STANDARD"
    area: "issues_projects"
    description: "Issue ã«ã¯ç¨®åˆ¥ãƒ»å„ªå…ˆåº¦ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ»ä¸¦åˆ—å®Ÿè¡Œå¯å¦ ãªã©ã®ãƒ©ãƒ™ãƒ«ã‚’ AI ãŒè‡ªå‹•ä»˜ä¸ã™ã‚‹ã€‚"
    trigger_actions: ["issue_create_intent"]
    guidance_for_ai: |
      å¿…é ˆãƒ©ãƒ™ãƒ«
        - kind/(feature|bug|improvement|refactoring)
        - priority/(high|medium|low)
        - status/(todo|in-progress|blocked|done)
      ä»»æ„ãƒ©ãƒ™ãƒ«
        - ğŸ¤–-parallel-ok / ğŸš§-sequential-required
        - component/*
      gh CLI ä½¿ç”¨ä¾‹:
        gh issue create ... --label "kind/feature,priority/high,ğŸ¤–-parallel-ok"
    severity: "MAJOR"

  # ------------------------------------------------------------------
  # 2. Pull Request (PR) & Code Review
  # ------------------------------------------------------------------
  - id: "PR_REQUIRES_LINKED_ISSUE"
    area: "pull_requests"
    description: "å…¨ã¦ã® PR ã¯å¯¾å¿œã™ã‚‹ Issue ã‚’ `Closes #xx` å½¢å¼ã§å¿…ãšãƒªãƒ³ã‚¯ã™ã‚‹ã€‚"
    trigger_actions: ["git_pr_create_intent"]
    guidance_for_ai: |
      PR æœ¬æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã« `Closes #{issue_number}` ã‚’è‡ªå‹•æŒ¿å…¥ã—ã€
      ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãŒãƒªãƒ³ã‚¯ã‚’ç¢ºèªå‡ºæ¥ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
    severity: "CRITICAL"

  - id: "PR_REVIEW_MIN_APPROVALS"
    area: "pull_requests"
    description: "main ãƒ–ãƒ©ãƒ³ãƒã¸ãƒãƒ¼ã‚¸ã™ã‚‹ PR ã¯ 2 ä»¶ä»¥ä¸Šã® Approved ãŒå¿…è¦ã€‚"
    trigger_actions: ["pr_merge_intent"]
    guidance_for_ai: |
      1. gh CLI ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°ã‚’å–å¾—ã—ã€æœªé”ã®å ´åˆã¯è‡ªå‹•ã§ `gh pr review --request` ã‚’ä½¿ã„ CODEOWNERS ã®ãƒ¬ãƒ“ãƒ¥ã‚¢ã«ä¾é ¼ã™ã‚‹ã€‚
      2. 24 æ™‚é–“æ‰¿èªãŒå¾—ã‚‰ã‚Œãªã„å ´åˆã€çŠ¶æ³ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Šã—å†ä¾é ¼æ–¹æ³•ã‚’ææ¡ˆã™ã‚‹ã€‚
    severity: "CRITICAL"

  - id: "PR_STATUS_CHECK_BLOCK"
    area: "pull_requests"
    description: "CI (GitHub Actions) ã®å¿…é ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯ãŒæˆåŠŸã—ãªã„é™ã‚Šãƒ¡ãƒ¼ã‚¸ç¦æ­¢ã€‚"
    trigger_actions: ["pr_merge_intent"]
    guidance_for_ai: |
      `gh pr checks` ã§ CI çµæœã‚’ç¢ºèªã—ã€å¤±æ•—ã—ã¦ã„ã‚Œã°ä¿®æ­£ã‚³ãƒŸãƒƒãƒˆã‚’ãƒ—ãƒƒã‚·ãƒ¥ã—å†å®Ÿè¡Œã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ã€‚
    severity: "ERROR"

  # ------------------------------------------------------------------
  # 3. GitHub Actions (CI/CD & Automation)
  # ------------------------------------------------------------------
  - id: "REQUIRE_TEST_WORKFLOW"
    area: "actions"
    description: "main ãƒ–ãƒ©ãƒ³ãƒã¨ PR ã«ã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã€‚"
    trigger_actions: ["ci_setup_intent", "project_bootstrap"]
    guidance_for_ai: |
      `.github/workflows/test.yml` ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è‡ªå‹•ç”Ÿæˆã™ã‚‹ã€‚
      Rust ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾‹:
        steps: `cargo fmt -- --check`, `cargo clippy -- -D warnings`, `cargo test --all`.
    severity: "MAJOR"

  - id: "AUTO_RELEASE_DRAFT"
    area: "actions"
    description: "ã‚¿ã‚°ä»˜ãã‚³ãƒŸãƒƒãƒˆæ™‚ã« GitHub Release ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã€‚"
    trigger_actions: ["release_draft_intent"]
    guidance_for_ai: |
      `gh release create --draft` ã‚’ workflow ã§è‡ªå‹•åŒ–ã—ã€CHANGELOG.md ã®æœ€æ–°ã‚¨ãƒ³ãƒˆãƒªã‚’æœ¬æ–‡ã¨ã™ã‚‹ã€‚
    severity: "MINOR"

  # ------------------------------------------------------------------
  # 4. Security & Dependency Management
  # ------------------------------------------------------------------
  - id: "ENABLE_DEPENDABOT"
    area: "security_dependencies"
    description: "Dependabot ã‚’æœ‰åŠ¹åŒ–ã—ã€Rust Crates (cargo), GitHub Actions ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ PR ã‚’è‡ªå‹•ä½œæˆã™ã‚‹ã€‚"
    trigger_actions: ["project_bootstrap"]
    guidance_for_ai: |
      `.github/dependabot.yml` ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆã— PR ã‚’ææ¡ˆã™ã‚‹ã€‚
    severity: "MAJOR"

  - id: "ENABLE_CODE_SCANNING"
    area: "security_dependencies"
    description: "CodeQL ã‚’ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚"
    trigger_actions: ["security_setup_intent"]
    guidance_for_ai: |
      `.github/workflows/codeql.yml` ã‚’ç”Ÿæˆã—ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨å®šæœŸã‚¹ã‚­ãƒ£ãƒ³ã‚’è¨­å®šã™ã‚‹ã€‚
    severity: "MAJOR"

  # ------------------------------------------------------------------
  # 5. Discussion & Documentation
  # ------------------------------------------------------------------
  - id: "USE_DISCUSSIONS_FOR_QA"
    area: "communication"
    description: "ä»•æ§˜ã®ç–‘å•ã‚„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è­°è«–ã¯ Issue ã§ã¯ãªã GitHub Discussions ã® `Q&A` ã‚«ãƒ†ã‚´ãƒªã§è¡Œã†ã€‚"
    trigger_actions: ["question_intent"]
    guidance_for_ai: |
      gh CLI ä¾‹: `gh discussion create --category "Q&A" --title "..." --body-file /tmp/body.md`ã€‚
      æ±ºå®šäº‹é …ã¯é–¢é€£ Issue/PR ã«ãƒªãƒ³ã‚¯ã—è¦ç´„ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦æ®‹ã™ã€‚
    severity: "MINOR"

  - id: "WIKI_SYNC_REQUIRED"
    area: "communication"
    description: "é‡è¦ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ãƒ»æ±ºå®šäº‹é …ã¯ GitHub Wiki ã¨ README ã«åæ˜ ã—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®é‡è¤‡ã‚’é˜²ãã€‚"
    trigger_actions: ["doc_update_intent"]
    guidance_for_ai: |
      1. å¤‰æ›´ç‚¹ã‚’ PR ã«å«ã‚ Wiki ã‚‚æ›´æ–°ã™ã‚‹ (gh CLI: `gh wiki clone`).
      2. README ã«ã¯æ¦‚è¦ã¨ Wiki ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿½è¨˜ã™ã‚‹ã€‚
    severity: "MINOR"

  # ------------------------------------------------------------------
  # 6. Tooling & Integration
  # ------------------------------------------------------------------
  - id: "GH_CLI_EXCLUSIVE_USE"
    area: "tooling_and_integration"
    description: |
      GitHub ä¸Šã®æƒ…å ±å–å¾—ãƒ»ä½œæˆãƒ»æ›´æ–°ãªã©ã€ã™ã¹ã¦ã®å¯¾è©±ã¯ `gh` CLI çµŒç”±ã§å®Ÿè¡Œã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚
      `web_fetch` ãªã©ã®æ±ç”¨ãƒ„ãƒ¼ãƒ«ã‚’ GitHub ãƒªãƒã‚¸ãƒˆãƒªã® URL ã«å¯¾ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ç¦æ­¢ã™ã‚‹ã€‚
    trigger_actions: ["github_interaction_intent"]
    guidance_for_ai: |
      - GitHub ã® Issue, PR, discussions, projects ç­‰ã®æƒ…å ±ã‚’å‚ç…§ã™ã‚‹å ´åˆã¯ã€å¿…ãš `gh issue view`, `gh pr view` ç­‰ã® `gh` ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
      - Issue ã‚„ PR ã‚’ä½œæˆã™ã‚‹å ´åˆã‚‚ `gh issue create`, `gh pr create` ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
      - `web_fetch` ãƒ„ãƒ¼ãƒ«ã§ `github.com` ã® URL ã‚’ç›´æ¥èª­ã¿å–ã‚‹ã‚ˆã†ãªæ“ä½œã¯çµ¶å¯¾ã«è¡Œã‚ãªã„ã“ã¨ã€‚
    severity: "CRITICAL"

# EOF
