# ADR-004: Rust 実装の選択

**決定日**: 2025-05-31  
**ステータス**: 採用  

## コンテキスト

CLI ツールの実装言語として、Go、Rust、Python、Shell Script などの選択肢がある。Git 操作を含む複雑なファイルシステム操作を安全かつ高速に実行する必要がある。

主要な選択肢の比較：
- **Go**: 高速、シンプル、クロスコンパイル容易
- **Rust**: 安全性、高速、エコシステム充実
- **Python**: 開発速度、豊富なライブラリ
- **Shell Script**: シンプル、依存関係なし

## 決定

Rust を実装言語として採用し、単一バイナリでの配布を行う。

## 根拠

1. **メモリ安全性**: ファイルシステム操作における安全性の確保
2. **パフォーマンス**: C/C++ レベルの実行速度
3. **エコシステム**: Git 操作ライブラリ（git2-rs）の充実
4. **静的リンク**: 依存関係を含む単一バイナリの生成が容易
5. **クロスコンパイル**: 複数プラットフォーム対応が簡単

## 影響

- **正の影響**:
  - 高速で安全なファイルシステム操作
  - 単一バイナリでの配布により依存関係の問題を回避
  - 型安全性による実行時エラーの削減

- **負の影響**:
  - 開発チームの Rust 学習コストが発生
  - コンパイル時間が Go と比較して長い
  - バイナリサイズが若干大きくなる可能性

- **対応策**:
  - Rust の学習リソースとベストプラクティスの共有
  - CI/CD でのコンパイル時間最適化 