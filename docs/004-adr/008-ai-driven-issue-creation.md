# ADR-008: AI駆動開発におけるGitHub Issue作成プロセス

**決定日**: 2025-01-27  
**ステータス**: 採用  

## コンテキスト

AI駆動開発の普及により、AIツール（Cursor、Windsurf等）を活用した開発プロセスが一般的になってきた。しかし、従来のIssue作成プロセスは人間中心の設計であり、以下の課題が顕在化していた：

### 従来の課題
- **並列性の考慮不足**: タスクが逐次実行前提で設計され、AIによる並列処理の恩恵を受けにくい
- **詳細度の不統一**: 新人エンジニアやAIが理解・実行できる詳細度が確保されていない
- **協調プロセスの欠如**: AIと人間の役割分担が不明確で、品質担保が困難
- **ツール活用の指針不足**: どのAIツールをどの場面で使うべきかの指針がない
- **質問プロセスの非効率**: 不明点の確認が非構造化で、必要な情報収集に時間がかかる

### 技術的背景
- GitHub CLIの普及により、コマンドラインからのIssue操作が容易になった
- AIツールの精度向上により、構造化されたプロンプトから高品質なIssue生成が可能になった
- 並列処理可能なタスク設計により、開発効率の大幅な向上が期待できる

## 決定

AI駆動開発に最適化されたGitHub Issue作成プロセスを採用する。このプロセスは以下の要素で構成される：

### 1. 協調的Issue作成プロセス
- **S1**: 人間による初期要求の提示
- **S1.5**: AIによる構造化質問（必要に応じて）
- **S2**: AIによるIssue初期ドラフト生成
- **S3**: 人間によるレビューとフィードバック
- **S4**: AIによる修正・改善（反復ループ）
- **S5**: 人間による最終確認と承認
- **S6**: GitHub CLIによるIssue登録

### 2. 構造化されたIssue形式
```markdown
# [種別] タイトル

## 🎯 概要 (Overview)
## 📝 タスクリスト (Tasks)
## ✅ 完了の定義 (Definition of Done)
## 🛠️ 使用ツール (Development Tools)
```

### 3. 並列性の明示
- **ラベル**: `🤖-parallel-ok` / `🚧-sequential-required`
- **タスク絵文字**: `✨`（並列可能）/ `➡️`（逐次必要）

### 4. 構造化質問プロセス
```
1. **質問の背景**: なぜこの情報が必要なのかを説明
2. **具体的な質問**: 明確で答えやすい形で質問を提示
3. **提案**: 可能であれば、推測する選択肢や方向性を提示
4. **影響**: この情報がIssue作成にどう影響するかを説明
```

### 5. ファイル管理戦略
- **保存場所**: `/tmp`ディレクトリ
- **理由**: 自動クリーンアップ、プロジェクト非汚染、GitHub中心主義
- **再利用**: `gh issue view`による取得

### 6. GitHub CLI活用
```bash
# 基本登録
gh issue create --title "タイトル" --body-file /tmp/issue-draft.md

# 包括的登録
gh issue create --title "[機能追加] 機能名" \
  --body-file /tmp/issue-draft.md \
  --label "🤖-parallel-ok" \
  --label "kind/feature" \
  --assignee developer \
  --milestone 1
```

## 根拠

### 1. 並列性最優先の設計
- **効率性**: AIによる並列タスク実行により開発速度が大幅向上
- **スケーラビリティ**: 複数のAIエージェントによる同時作業が可能
- **明示性**: 絵文字とラベルによる視覚的な並列性表示

### 2. 協調的品質担保
- **AI強化**: 構造化プロンプトによる高品質な初期ドラフト生成
- **人間監督**: 最終的な品質と妥当性の確認
- **反復改善**: AIと人間の対話による継続的な品質向上

### 3. 新人エンジニア対応
- **詳細度**: 経験の浅いエンジニアでも理解・実行可能なタスク記述
- **明確性**: 完了の定義と受け入れ基準の明示
- **ガイダンス**: 使用ツールと手順の具体的な指示

### 4. 効率的な情報収集
- **構造化質問**: 背景・質問・提案・影響の4要素による効率的な情報収集
- **一問一答**: 集中的で答えやすい質問形式
- **選択肢提示**: AIの推測による回答の容易化

### 5. 実用的なファイル管理
- **一時性**: `/tmp`による自動クリーンアップ
- **非汚染**: プロジェクトディレクトリの整理維持
- **中心化**: GitHubを真の情報源とする設計

## 影響

### 正の影響
- **開発効率の向上**: 並列タスク実行による大幅な時間短縮
- **品質の向上**: 構造化プロセスによる一貫した高品質Issue
- **学習効果**: 新人エンジニアの成長促進
- **保守性**: 明確な役割分担による持続可能なプロセス
- **ツール活用**: AIツールの効果的な活用促進

### 負の影響
- **学習コスト**: 新しいプロセスの習得に時間が必要
- **ツール依存**: GitHub CLIとAIツールへの依存度増加
- **複雑性**: 従来のシンプルなIssue作成より手順が複雑

### 対応策
- **段階的導入**: 小規模プロジェクトでの試験運用から開始
- **教育支援**: プロンプトファイルとルールファイルによる学習支援
- **フォールバック**: 従来手法との併用期間の設定
- **継続改善**: 実際の使用フィードバックによるプロセス改善

## 実装詳細

### ファイル構成
```
.aicoding/
├── rules/001-create-github-issue.yaml    # プロセスルール定義
├── prompts/001-create-github.md          # 使用方法とプロンプト
└── (commands/ は削除済み)                # シンプル化のため
```

### 推奨ワークフロー
1. **要求発生** → AIツールでIssue生成プロンプト使用
2. **協調改善** → AIと人間の反復的な改善プロセス
3. **一時保存** → `/tmp/issue-draft.md`に保存
4. **GitHub登録** → `gh issue create`で登録
5. **自動削除** → システム再起動時の自動クリーンアップ

### 品質指標
- タスクの並列実行可能性（✨絵文字の割合）
- 完了の定義の明確性（測定可能な基準の数）
- 新人理解度（タスク記述の具体性）
- AIツール活用度（推奨ツールの明示）

## 関連決定

- **ADR-003**: ディレクトリ原則 - `.aicoding`ディレクトリの使用根拠
- **ADR-007**: 文書管理戦略 - 要件定義書との役割分担
- **Future ADR**: AIツール選択基準（予定）

## 変更履歴

| 日付 | 変更内容 |
|------|----------|
| 2025-01-27 | 初版作成 - AI駆動Issue作成プロセスの決定 | 